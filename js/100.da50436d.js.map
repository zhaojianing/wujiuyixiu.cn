{"version":3,"file":"js/100.da50436d.js","mappings":"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","sources":["webpack://wujiuyixiu/./src/views/PostArticle.vue?83c1","webpack://wujiuyixiu/./src/views/PostArticle.vue?bdaa","webpack://wujiuyixiu/./src/views/PostArticle.vue"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, withCtx as _withCtx, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0529153a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { style: {\"border\":\"1px solid #ccc\",\"z-index\":\"1000\"} }\nconst _hoisted_2 = { class: \"post-article-setting\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"发布设置\", -1))\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { key: 1 }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"ant-upload-text\" }, \"封面上传\", -1))\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"支持上传图片格式：JPEG,PNG,JPG。\", -1))\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"发布\")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_col = _resolveComponent(\"a-col\")!\n  const _component_Toolbar = _resolveComponent(\"Toolbar\")!\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_Editor = _resolveComponent(\"Editor\")!\n  const _component_loading_outlined = _resolveComponent(\"loading-outlined\")!\n  const _component_plus_outlined = _resolveComponent(\"plus-outlined\")!\n  const _component_a_upload = _resolveComponent(\"a-upload\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_row = _resolveComponent(\"a-row\")!\n\n  return (_openBlock(), _createBlock(_component_a_row, { class: \"post-article\" }, {\n    default: _withCtx(() => [\n      _createVNode(_component_a_col, {\n        xs: 2,\n        sm: 2,\n        md: 2,\n        lg: 2,\n        xl: 4\n      }),\n      _createVNode(_component_a_col, {\n        xs: 20,\n        sm: 20,\n        md: 20,\n        lg: 20,\n        xl: 16\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createVNode(_component_Toolbar, {\n              style: {\"border-bottom\":\"1px solid #ccc\"},\n              editor: _ctx.editorRef,\n              defaultConfig: _ctx.toolbarConfig,\n              mode: _ctx.mode\n            }, null, 8, [\"editor\", \"defaultConfig\", \"mode\"]),\n            _createVNode(_component_a_input, {\n              style: { borderTop: 'none', borderLeft: 'none', borderRight: 'none' },\n              value: _ctx.title,\n              \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.title) = $event)),\n              size: \"large\",\n              placeholder: \"请输入标题\"\n            }, null, 8, [\"value\"]),\n            _createVNode(_component_Editor, {\n              class: \"post-article-editor\",\n              style: {\"min-height\":\"500px\",\"overflow-y\":\"hidden\"},\n              modelValue: _ctx.valueHtml,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.valueHtml) = $event)),\n              defaultConfig: _ctx.editorConfig,\n              mode: _ctx.mode,\n              onOnCreated: _ctx.handleCreated\n            }, null, 8, [\"modelValue\", \"defaultConfig\", \"mode\", \"onOnCreated\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_2, [\n            _hoisted_3,\n            _createVNode(_component_a_form, {\n              \"label-col\": { span: 2 },\n              \"wrapper-col\": { span: 22 },\n              autocomplete: \"off\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_form_item, {\n                  label: \"封面\",\n                  name: \"username\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_upload, {\n                      \"file-list\": _ctx.fileList,\n                      \"onUpdate:file-list\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.fileList) = $event)),\n                      \"list-type\": \"picture-card\",\n                      class: \"avatar-uploader\",\n                      \"show-upload-list\": false,\n                      \"before-upload\": _ctx.beforeUpload,\n                      customRequest: _ctx.handleUpdateImg,\n                      onChange: _ctx.handleChange\n                    }, {\n                      default: _withCtx(() => [\n                        (_ctx.imageUrl)\n                          ? (_openBlock(), _createElementBlock(\"img\", {\n                              key: 0,\n                              style: {\"width\":\"100%\",\"height\":\"100%\"},\n                              src: _ctx.imageUrl,\n                              alt: \"avatar\"\n                            }, null, 8, _hoisted_4))\n                          : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                              (_ctx.loading)\n                                ? (_openBlock(), _createBlock(_component_loading_outlined, { key: 0 }))\n                                : (_openBlock(), _createBlock(_component_plus_outlined, { key: 1 })),\n                              _hoisted_6\n                            ]))\n                      ]),\n                      _: 1\n                    }, 8, [\"file-list\", \"before-upload\", \"customRequest\", \"onChange\"]),\n                    _hoisted_7\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_form_item, {\n                  label: \"标签\",\n                  name: \"password\",\n                  \"wrapper-col\": { offset: 0, span: 8 }\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_input, {\n                      value: _ctx.label,\n                      \"onUpdate:value\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.label) = $event))\n                    }, null, 8, [\"value\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_form_item, { \"wrapper-col\": { offset: 2, span: 16 } }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_button, {\n                      type: \"primary\",\n                      \"html-type\": \"submit\",\n                      onClick: _ctx.postArticle\n                    }, {\n                      default: _withCtx(() => [\n                        _hoisted_8\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ])\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_a_col, {\n        xs: 2,\n        sm: 2,\n        md: 2,\n        lg: 2,\n        xl: 4\n      })\n    ]),\n    _: 1\n  }))\n}","\r\nimport { defineComponent, onBeforeUnmount, ref, shallowRef, onMounted, reactive } from \"@vue/runtime-core\";\r\nimport '@wangeditor/editor/dist/css/style.css' // 引入 css\r\nimport { Editor, Toolbar } from '@wangeditor/editor-for-vue'\r\nimport { PlusOutlined, LoadingOutlined } from '@ant-design/icons-vue';\r\nimport { message } from 'ant-design-vue';\r\nimport type { UploadChangeParam, UploadProps } from 'ant-design-vue';\r\nimport GLOBALCONFIG from '../until/globalConfig'\r\nimport Axios from \"@/until/axios\";\r\nimport qs from \"qs\";\r\nimport axios from \"axios\";\r\n\r\nfunction getBase64(img: Blob, callback: (base64Url: string) => void) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result as string));\r\n    reader.readAsDataURL(img);\r\n}\r\nexport default defineComponent({\r\n    name: \"PostArticle\",\r\n    components: { Editor, Toolbar, LoadingOutlined, PlusOutlined, },\r\n    setup() {\r\n        // 编辑器实例，必须用 shallowRef\r\n        const editorRef = shallowRef()\r\n        // 内容 HTML\r\n        // const valueHtml = ref('<p>hello</p>')\r\n        const valueHtml = ref('')\r\n        // 模拟 ajax 异步获取内容\r\n        onMounted(() => {\r\n            // setTimeout(() => {\r\n            //     valueHtml.value = '<p>模拟 Ajax 异步设置内容</p>'\r\n            // }, 1500)\r\n        })\r\n        const toolbarConfig = {}\r\n        //配置编辑器\r\n        const editorConfig = { \r\n            placeholder: '请输入内容...(暂时不支持上传文档图片，视频)',\r\n            scroll: false\r\n        }\r\n        // 组件销毁时，也及时销毁编辑器\r\n        let isupdate = false\r\n        onBeforeUnmount(() => {\r\n            const editor = editorRef.value\r\n            if (editor == null) return\r\n            editor.destroy()\r\n        })\r\n        const handleCreated = (editor: any) => {\r\n            editorRef.value = editor // 记录 editor 实例，重要！\r\n        }\r\n\r\n        // 标题\r\n        const title = ref<string>('');\r\n\r\n        // 上传图片\r\n        const fileList = ref([]);\r\n        const loading = ref<boolean>(false);\r\n        const imageUrl = ref<string>('');\r\n        let img_url = \"\"\r\n        const handleChange = (info: UploadChangeParam) => {\r\n            if (info.file.status === 'uploading') {\r\n                loading.value = true;\r\n                return;\r\n            }\r\n            if (info.file.status === 'done') {\r\n                // Get this url from response in real world.\r\n                getBase64(info.file.originFileObj!, (base64Url: string) => {\r\n                    imageUrl.value = base64Url;\r\n                    loading.value = false;\r\n                });\r\n            }\r\n            if (info.file.status === 'error') {\r\n                loading.value = false;\r\n                message.error('upload error');\r\n            }\r\n        };\r\n        const beforeUpload = (file: { type: string; size: number;uid: string; lastModified: number; name: string; }) => {\r\n            const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png' || file.type === 'image/jpg';\r\n            if (!isJpgOrPng) {\r\n                message.error('你需要上传JPEG,PNG,JPG格式的图片');\r\n            }\r\n            const isLt2M = file.size / 1024 / 1024 < 2;\r\n            if (!isLt2M) {\r\n                message.error('你的图片过大,最大上传2MB!');\r\n            }\r\n            return isJpgOrPng && isLt2M;\r\n        };\r\n\r\n        return {\r\n            editorRef,\r\n            valueHtml,\r\n            mode: 'default', // 或 'simple'\r\n            toolbarConfig,\r\n            editorConfig,\r\n            handleCreated,\r\n            title,\r\n            fileList,\r\n            loading,\r\n            imageUrl,\r\n            handleChange,\r\n            beforeUpload,\r\n            GLOBALCONFIG,\r\n            img_url,\r\n            isupdate,\r\n        };\r\n    },\r\n    data() {\r\n        return {\r\n            label: \"\",\r\n            \r\n        }\r\n    },\r\n    methods: {\r\n        handleUpdateImg(data: any) {\r\n            if (this.imageUrl != \"\") {\r\n                this.deleteImg()\r\n            }\r\n            //添加请求头\r\n            const headers = {\r\n                \"Content-Type\": \"multipart/form-data\",\r\n            };\r\n            //配置头\r\n            const request = axios.create({\r\n                headers: headers,\r\n            });\r\n            request.post(GLOBALCONFIG.GLOBAL.vue_http_api+'update_cover', data).then((response) => {\r\n                this.imageUrl = GLOBALCONFIG.GLOBAL.vue_http_api+response.data.data\r\n                // qs.stringify(\r\n                this.img_url = response.data\r\n            }).catch((error) => {\r\n                message.error(\"上传图片失败\")\r\n            })\r\n        },\r\n        deleteImg() {\r\n            Axios.delete('/update_cover?img_name=' + this.imageUrl).then((response) => {\r\n                console.log(\"图片更新成功\")\r\n            }).catch((error) => {\r\n                // console.log('失败')\r\n                console.log(\"图片更新删除失败\")\r\n            })\r\n        },\r\n        postArticle() {\r\n            this.isupdate = true\r\n            if (this.$store.state.userData == '') {\r\n                message.error('需要先登录账号！')\r\n                return\r\n            }\r\n            if (this.isEmpty() == null) {\r\n                return\r\n            }\r\n\r\n            let response = {\r\n                title: this.title,\r\n                html: this.valueHtml,\r\n                text: this.editorRef.getText(),\r\n                article_user_id: this.$store.state.userData.uid,\r\n                article_cover: this.imageUrl,\r\n                is_encryption: \"0\",\r\n                article_password: \"0\",\r\n                article_collect: \"0\",\r\n                like: 0,\r\n                watch_number: 0,\r\n                comment_number: 0,\r\n                classification: this.label,\r\n                username: this.$store.state.userData.name\r\n            }\r\n            Axios.post('/article', qs.stringify(response)).then((res) => {\r\n                if (res.data == null) {\r\n                    message.error('文章上传失败')\r\n                    return\r\n                }\r\n                message.success('文章上传成功')\r\n            }).catch((error) => {\r\n                // console.log('失败')\r\n                message.error('文章上传失败')\r\n            })\r\n        },\r\n        isEmpty() {\r\n            if (this.title == \"\") {\r\n                message.error('请输入标题')\r\n                return null\r\n            } else if (this.editorRef.getText().length < 10) {\r\n                message.error('内容不得小于10个字')\r\n                return null\r\n            } else if (this.imageUrl == \"\") {\r\n                message.error('请上传封面')\r\n                return null\r\n            }\r\n            return 1\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./PostArticle.vue?vue&type=template&id=0529153a&scoped=true&ts=true\"\nimport script from \"./PostArticle.vue?vue&type=script&lang=ts\"\nexport * from \"./PostArticle.vue?vue&type=script&lang=ts\"\n\nimport \"./PostArticle.vue?vue&type=style&index=0&id=0529153a&lang=stylus&scoped=true\"\n\nimport exportComponent from \"D:\\\\wujiuyixiu.com\\\\wujiuyixiu\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0529153a\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","style","_hoisted_2","class","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","key","_hoisted_6","_hoisted_7","_hoisted_8","_createTextVNode","render","_ctx","_cache","$props","$setup","$data","$options","_component_a_col","_resolveComponent","_component_Toolbar","_component_a_input","_component_Editor","_component_loading_outlined","_component_plus_outlined","_component_a_upload","_component_a_form_item","_component_a_button","_component_a_form","_component_a_row","_openBlock","_createBlock","default","_withCtx","_createVNode","xs","sm","md","lg","xl","editor","editorRef","defaultConfig","toolbarConfig","mode","borderTop","borderLeft","borderRight","value","title","$event","size","placeholder","modelValue","valueHtml","editorConfig","onOnCreated","handleCreated","span","autocomplete","label","name","fileList","beforeUpload","customRequest","handleUpdateImg","onChange","handleChange","imageUrl","_createElementBlock","src","alt","loading","_","offset","type","onClick","postArticle","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","defineComponent","components","Editor","Toolbar","LoadingOutlined","PlusOutlined","setup","shallowRef","ref","onMounted","scroll","isupdate","onBeforeUnmount","destroy","img_url","info","file","status","originFileObj","base64Url","message","isJpgOrPng","isLt2M","GLOBALCONFIG","data","methods","this","deleteImg","headers","request","axios","post","then","response","catch","error","Axios","console","log","$store","state","userData","isEmpty","html","text","getText","article_user_id","uid","article_cover","is_encryption","article_password","article_collect","like","watch_number","comment_number","classification","username","qs","res","length","__exports__"],"sourceRoot":""}