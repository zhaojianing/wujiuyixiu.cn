"use strict";(self["webpackChunkwujiuyixiu"]=self["webpackChunkwujiuyixiu"]||[]).push([[747],{8747:function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var a=i(3396),l=i(7139),r=i(9242);const c=e=>((0,a.dD)("data-v-4219db53"),e=e(),(0,a.Cn)(),e),n={class:"articleUidMain",style:{"box-shadow":"#dbdbdb 0px 0px 6px 2px","border-radius":"6px","z-index":"1000"}},s={class:"articleUidMain-author"},d={class:"articleUidMain-author-avatar-left"},m={class:"articleUidMain-author-xinxi-right"},u={class:"articleUidMain-author-xinxi-right-bottom"},o={class:"articleUidMainEditor"},_={class:"articleUidMain-comment"},p=c((()=>(0,a._)("h3",null,"评论",-1))),h={style:{border:"1px solid #ccc"}},w=c((()=>(0,a._)("span",null,"发布",-1))),y=[w],x=c((()=>(0,a._)("hr",null,null,-1))),f={class:"articleUidMain-comment-lists"},g={class:"articleUidMain-comment-list"},b={class:"articleUidMain-comment-author"},v={class:"articleUidMain-comment-list-author-comment"},C={class:"articleUidMain-comment-list-author-comment-alldata"},U=(0,a.Uk)("      "),R=["onClick"],W={key:0},k=["onClick"],M={class:"articleUidMain-comment-author"},Z=(0,a.Uk)("："),z={class:"articleUidMain-comment-list-author-comment"},D={class:"articleUidMain-comment-list-author-comment-alldata"},V=(0,a.Uk)("       "),I=["onClick"],P={key:1},S=c((()=>(0,a._)("hr",null,null,-1)));function A(e,t,i,c,w,A){const $=(0,a.up)("a-col"),L=(0,a.up)("UserOutlined"),O=(0,a.up)("a-avatar"),j=(0,a.up)("Editor"),E=(0,a.up)("a-textarea"),F=(0,a.up)("a-row");return(0,a.wg)(),(0,a.j4)(F,{class:"articleUid"},{default:(0,a.w5)((()=>[(0,a.Wm)($,{xs:2,sm:2,md:2,lg:2,xl:4}),(0,a.Wm)($,{xs:20,sm:20,md:20,lg:20,xl:16},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("h1",null,(0,l.zw)(e.article.article_title),1),(0,a._)("div",s,[(0,a._)("div",d,[(0,a.Wm)(O,{size:64},{icon:(0,a.w5)((()=>[(0,a.Wm)(L)])),_:1})]),(0,a._)("div",m,[(0,a._)("p",null,(0,l.zw)(e.userInfo.name),1),(0,a._)("p",u,(0,l.zw)(new Date(Number(e.article.date)).toLocaleString())+" · 阅读 "+(0,l.zw)(e.article.watch_number),1)])]),(0,a._)("div",o,[(0,a.Wm)(j,{class:"articleUidEditor",style:{"min-height":"300px","overflow-y":"hidden"},modelValue:e.article.article_container_html,"onUpdate:modelValue":t[0]||(t[0]=t=>e.article.article_container_html=t),defaultConfig:e.editorConfig,mode:e.mode,onOnCreated:e.handleCreated},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])]),(0,a._)("div",_,[p,(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)($,{xs:4,sm:4,md:4,lg:4,xl:4,class:"articleUidMain-useroutlined"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{size:"large"},{icon:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(L)])])),_:1})])),_:1}),(0,a.Wm)($,{xs:16,sm:16,md:16,lg:16,xl:16},{default:(0,a.w5)((()=>[(0,a._)("div",h,[(0,a.Wm)(E,{value:e.textareaValue,"onUpdate:value":t[1]||(t[1]=t=>e.textareaValue=t),rows:4},null,8,["value"])])])),_:1}),(0,a.Wm)($,{xs:4,sm:4,md:4,lg:4,xl:4},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"articleUidMain-comment-put-btn",onClick:t[2]||(t[2]=(...t)=>e.updateComment&&e.updateComment(...t))},y)])),_:1})])),_:1}),x,(0,a._)("div",f,[(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.articleComment,(i=>((0,a.wg)(),(0,a.iD)("div",{class:"articleUidMain-comment-list-author",key:i.id},[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)($,{xs:4,sm:4,md:4,lg:4,xl:4,class:"articleUidMain-comment-list-useroutlined"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{size:"large"},{icon:(0,a.w5)((()=>[(0,a.Wm)(L)])),_:1})])),_:1}),(0,a.Wm)($,{xs:20,sm:20,md:20,lg:20,xl:20},{default:(0,a.w5)((()=>[(0,a._)("span",b,(0,l.zw)(i.uid_name),1),(0,a._)("div",v,[(0,a._)("span",null,(0,l.zw)(i.uid_container),1),(0,a._)("div",C,[(0,a._)("span",null,(0,l.zw)(new Date(Number(i.date)).toLocaleString()),1),U,(0,a._)("span",{style:{cursor:"pointer"},onClick:t=>e.isReplyShow(i.id,i.uid,i.uid_name)},"回复",8,R)])]),"1"==i.is_article_comment_reply?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.wy)((0,a._)("span",{style:{cursor:"pointer"},onClick:t=>e.getCommentReply(i.id)},"查看回复",8,k),[[r.F8,e.isShow!=i.id]]),(0,a.wy)((0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.articleCommentReply,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)($,{xs:2,sm:2,md:2,lg:2,xl:2},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{size:"small"},{icon:(0,a.w5)((()=>[(0,a.Wm)(L)])),_:1})])),_:1}),(0,a.Wm)($,{xs:20,sm:20,md:20,lg:20,xl:20},{default:(0,a.w5)((()=>[(0,a._)("span",M,(0,l.zw)(t.uid_name)+"@"+(0,l.zw)(t.reply_user_uid_name),1),Z,(0,a._)("span",null,(0,l.zw)(t.uid_container),1),(0,a._)("div",z,[(0,a._)("div",D,[(0,a._)("span",null,(0,l.zw)(new Date(Number(t.date)).toLocaleString()),1),V,(0,a._)("span",{style:{cursor:"pointer"},onClick:a=>e.isReplyShow(i.id,t.uid,t.uid_name)},"回复",8,I)])])])),_:2},1024)])),_:2},1024)])))),128))],512),[[r.F8,e.isShow==i.id]])])):((0,a.wg)(),(0,a.iD)("div",P))])),_:2},1024)])),_:2},1024),(0,a.wy)((0,a.Wm)(F,{class:(0,l.C_)({active:e.active==i.id})},{default:(0,a.w5)((()=>[(0,a.Wm)($,{xs:4,sm:4,md:4,lg:4,xl:4,class:"articleUidMain-useroutlined"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{size:"large"},{icon:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(L)])])),_:1})])),_:1}),(0,a.Wm)($,{xs:16,sm:16,md:16,lg:16,xl:16},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{value:e.textareaValueReply,"onUpdate:value":t[3]||(t[3]=t=>e.textareaValueReply=t),rows:4},null,8,["value"])])),_:1}),(0,a.Wm)($,{xs:4,sm:4,md:4,lg:4,xl:4},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"articleUidMain-comment-put-btn",onClick:t[4]||(t[4]=(...t)=>e.commentReply&&e.commentReply(...t))},[(0,a._)("span",null,"回复@"+(0,l.zw)(e.call),1)])])),_:1})])),_:2},1032,["class"]),[[r.F8,e.active==i.id]]),S])))),128))])])])])),_:1}),(0,a.Wm)($,{xs:2,sm:2,md:2,lg:2,xl:4})])),_:1})}var $=i(4870),L=i(6126),O=i(252),j=i(6639),E=i(5410),F=i.n(E),H=i(8896),N=(0,a.aZ)({setup(){const e=(0,$.iH)(""),t={scroll:!1,readOnly:!0},i=(0,$.XI)(),a=e=>{i.value=e};return{editorConfig:t,mode:"default",textareaValue:e,handleCreated:a}},components:{Editor:L.M,UserOutlined:H.Z},data(){return{article:{Comment:null,article_collect:"0",article_container_html:"<p>测试测试测试测试测试测试测试测试测试测试测试</p>",article_container_text:"测试测试测试测试测试测试测试测试测试测试测试",article_cover:"http://localhost:4863/static/img/16765373947490.png",article_password:"0",article_title:"测试",article_uid:"16765373965135",article_userid:"b376bdac2c9ec5b68bff83de744bd17b",classification:"测试测试",comment_number:0,date:"1676537396392",id:7,is_encryption:"0",like:0,watch_number:0},userInfo:{Date:"2023-02-16T00:00:00+08:00",account:"wujiuyixiu",article_num:0,avatar_url:"",dynamic_num:0,email:"",fan_num:0,id:1,martial_art:"",name:"站长",password:"",signature:"",start_num:0,uid:"b376bdac2c9ec5b68bff83de744bd17b"},articleComment:[{Reply:null,article_uid:"16765636682367",date:"1676619250387",id:4,is_article_comment_reply:"1",uid:"b376bdac2c9ec5b68bff83de744bd17b",uid_container:"hello ",uid_like:0,uid_name:"站长"}],active:0,isReply:!1,articleReply:{articleUid:"",replyUserUid:"",uid:"",uidContainer:"",uidLike:0,uid_name:"",articleCommentId:0,reply_user_uid_name:""},textareaValueReply:"",isShow:0,articleCommentReply:[{article_comment_id:5,article_uid:"16765636682367",date:"1676630499389",id:1,reply_user_uid:"b376bdac2c9ec5b68bff83de744bd17b",uid:"b376bdac2c9ec5b68bff83de744bd17b",uid_container:"开心",uid_like:0,uid_name:"站长",reply_user_uid_name:"站长"}],call:""}},mounted(){this.getArticle()},methods:{async getArticle(){await j.Z.get("/article?article_uid="+this.$route.params.uid).then((e=>{this.article=e.data,this.getArticleUsereInfo(e.data.article_userid),this.getArticleComment()})).catch((e=>{O.ZP.error("获取文章失败")}))},async getArticleUsereInfo(e){await j.Z.get("/user/info?uid="+e).then((e=>{this.userInfo=e.data})).catch((e=>{O.ZP.error("获取信息失败")}))},async updateComment(){if(""==this.$store.state.userData)return void O.ZP.error("需要先登录账号！");if(""==this.textareaValue)return void O.ZP.error("请输入评论内容~");let e={articleUid:this.article.article_uid,uid:this.$store.state.userData.uid,uid_name:this.$store.state.userData.name,uidContainer:this.textareaValue,uidLike:0};await j.Z.post("/article_comment",F().stringify(e)).then((e=>{"success"==e.data&&(O.ZP.success("评论成功"),this.getArticleComment())})).catch((e=>{O.ZP.error("获取信息失败")}))},async getArticleComment(){await j.Z.get("/article_comment?article_uid="+this.article.article_uid).then((e=>{this.articleComment=e.data})).catch((e=>{O.ZP.error("获取信息失败")}))},isReplyShow(e,t,i){this.textareaValueReply="",this.call=i,this.active=e,this.articleReply.articleCommentId=e,this.articleReply.replyUserUid=t,this.articleReply.reply_user_uid_name=i},async commentReply(){""!=this.$store.state.userData?""!=this.textareaValueReply?(this.articleReply.articleUid=this.article.article_uid,this.articleReply.uid=this.$store.state.userData.uid,this.articleReply.uid_name=this.$store.state.userData.name,this.articleReply.uidContainer=this.textareaValueReply,await j.Z.post("/article_comment_reply",F().stringify(this.articleReply)).then((e=>{O.ZP.success("评论成功"),this.getArticleComment(),this.getCommentReply(this.articleReply.articleCommentId)})).catch((e=>{O.ZP.error("发送回复失败")}))):O.ZP.error("请输入评论内容~"):O.ZP.error("需要先登录账号！")},async getCommentReply(e){this.articleReply.articleCommentId=e,await j.Z.get("/article_comment_reply?articleCommentId="+this.articleReply.articleCommentId+"&articleUid="+this.article.article_uid).then((t=>{this.articleCommentReply=t.data,this.isShow=e,this.textareaValueReply=""})).catch((e=>{O.ZP.error("获取回复失败")}))}}}),K=i(89);const Y=(0,K.Z)(N,[["render",A],["__scopeId","data-v-4219db53"]]);var T=Y}}]);
//# sourceMappingURL=747.e1f1d372.js.map